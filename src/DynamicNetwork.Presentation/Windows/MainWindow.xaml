<Window x:Class="DynamicNetwork.Presentation.Windows.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:DynamicNetwork.Presentation.Windows"
        mc:Ignorable="d"
        xmlns:views="clr-namespace:DynamicNetwork.Presentation.Views"
        xmlns:vm="clr-namespace:DynamicNetwork.Presentation.ViewModels"
        xmlns:converters="clr-namespace:DynamicNetwork.Presentation.Converters"
        Title="Dynamic Network" Height="1000" Width="1200">

    <Window.Resources>
        <converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        <converters:BooleanToYesNoConverter x:Key="BooleanToYesNoConverter"/>
        <converters:NullToVisibilityConverter x:Key="NullToVisibilityConverter"/>
        <converters:InverseBooleanToVisibilityConverter x:Key="InverseBooleanToVisibilityConverter"/>
        <converters:LinkDirectionToArrowConverter x:Key="LinkDirectionToArrowConverter"/>
        <converters:CollectionToStringConverter x:Key="CollectionToStringConverter"/>
        <converters:TransformationsToStringConverter x:Key="TransformationsToStringConverter"/>
        <converters:PathToStringConverter x:Key="PathToStringConverter"/>
        <converters:NullOrEmptyToVisibilityConverter x:Key="NullOrEmptyToVisibilityConverter"/>
        <converters:InverseNullToVisibilityConverter x:Key="InverseNullToVisibilityConverter"/>
        <converters:BoolToColorConverter x:Key="BoolToColorConverter"/>
        <converters:TimeIntervalToStringConverter x:Key="TimeIntervalToStringConverter"/>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0"
                Background="White"
                BorderBrush="#E1E8ED"
                BorderThickness="0,0,0,1"
                Padding="10">
            <StackPanel Orientation="Horizontal"
                        VerticalAlignment="Center">
                <Button Content="Загрузить файл" 
                        Command="{Binding LoadTemporalGraphCommand}" 
                        Padding="10,5" 
                        Margin="0,0,10,0"
                        Width="150"
                        Style="{StaticResource ModernIconButtonStyle}">
                    <Button.ContentTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <Path Data="M19,9H15V3H9V9H5L12,16L19,9Z" 
                                          Fill="#2C3E50"
                                          Width="16"
                                          Height="16"
                                          Margin="0,0,6,0"/>
                                <TextBlock Text="Загрузить файл" 
                                               VerticalAlignment="Center"/>
                            </StackPanel>
                        </DataTemplate>
                    </Button.ContentTemplate>
                </Button>

                <Separator Width="1" Height="20" Background="#E0E0E0" Margin="5,0"/>

                <TextBlock Text="Интервал:" 
                       VerticalAlignment="Center" 
                       Margin="5,0,5,0"
                       Foreground="#2C3E50"/>

                <ComboBox ItemsSource="{Binding IntervalsViewModel.Graphs}"
                      SelectedItem="{Binding IntervalsViewModel.Selected}"
                      DisplayMemberPath="Interval"
                      Width="200"
                      Style="{StaticResource ModernComboBoxStyle}"/>
                
                <Separator Width="1" Height="20" Background="#E0E0E0" Margin="5,0"/>
                <Button Content="Синтезировать" 
                        Width="150"
                        Command="{Binding SynthesizeConfigCommand}"
                        Style="{StaticResource ModernIconButtonStyle}"
                        ToolTip="Синтезировать конфигурацию на основе загруженных данных"/>

                <Separator Width="1" Height="20" Background="#E0E0E0" Margin="5,0"/>

                <Button Content="Экспорт"
                        Command="{Binding ExportXmlCommand}"
                        Padding="10,5" 
                        Margin="0,0,10,0"
                        Width="150"
                        Style="{StaticResource ModernIconButtonStyle}"/>
            </StackPanel>
        </Border>

        <Grid Grid.Row="1" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="200"/>
                </Grid.RowDefinitions>

                <Border Grid.Row="0" 
                        Style="{StaticResource CardBorderStyle}">
                    <views:VisualGraphView DataContext="{Binding VisualGraphViewModel}"/>
                </Border>

                <GridSplitter Grid.Row="1" 
                             Height="5" 
                             HorizontalAlignment="Stretch" 
                             Background="#E1E8ED"
                             ResizeDirection="Rows"/>
                <Border Grid.Row="2" 
                        Style="{StaticResource ListBoxContainerStyle}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <TextBlock Text="Все устройства" 
                                   FontWeight="SemiBold" 
                                   Margin="0,0,0,10"
                                   Foreground="#2C3E50"/>
                        <ListBox Grid.Row="1"
                                 ItemsSource="{Binding CurrentGraph.AllNetworkNodes}"
                                 Background="Transparent">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Border Padding="8,6" 
                                            Margin="0,2" 
                                            CornerRadius="4"
                                            Style="{StaticResource SelectedToBackgroundConverterStyle}">
                                        <TextBlock Text="{Binding}" 
                                                   FontSize="13"
                                                   Foreground="#2C3E50"/>
                                    </Border>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </Grid>
                </Border>
            </Grid>

            <GridSplitter Grid.Column="1" 
                      Width="8" 
                      HorizontalAlignment="Center" 
                      VerticalAlignment="Stretch"
                      Background="Transparent">
                <GridSplitter.Template>
                    <ControlTemplate>
                        <Border Background="#CCD1D9" 
                                Width="2" 
                                HorizontalAlignment="Center"
                                Margin="0,20"/>
                    </ControlTemplate>
                </GridSplitter.Template>
            </GridSplitter>

            <TabControl Grid.Column="2" Margin="5"
                        Style="{StaticResource ModernTabControlStyle}">
                <TabControl.ItemContainerStyle>
                    <Style TargetType="TabItem" BasedOn="{StaticResource ModernTabItemStyle}"/>
                </TabControl.ItemContainerStyle>
                <TabItem Header="Интервалы">
                    <ScrollViewer Style="{StaticResource CustomScrollViewerStyle}">
                        <StackPanel Margin="15">
                            <Border Style="{StaticResource InnerCardStyle}">
                                <Grid Margin="10">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <StackPanel Grid.Row="0"
                                                Orientation="Horizontal"
                                                Margin="0,0,0,12">
                                        <Path Data="M12,20 C8.134,20 5,16.866 5,13 C5,9.134 8.134,6 12,6 C15.866,6 19,9.134 19,13 C19,16.866 15.866,20 12,20 Z M12,4 C7.029,4 3,8.029 3,13 C3,17.971 7.029,22 12,22 C16.971,22 21,17.971 21,13 C21,8.029 16.971,4 12,4 Z M11,14 L11,8 L13,8 L13,14 L11,14 Z M11,16 L11,14 L13,14 L13,16 L11,16 Z" 
                                              Fill="#2980B9"
                                              Width="25"
                                              Height="25"
                                              Margin="0,0,8,0"/>
                                        <TextBlock Text="Интервалы стабильности"
                                                   FontWeight="SemiBold"
                                                   FontSize="14"
                                                   Foreground="#2C3E50"/>
                                    </StackPanel>

                                    <ListBox Grid.Row="1"
                                             ItemsSource="{Binding IntervalsViewModel.Graphs}"
                                             SelectedItem="{Binding IntervalsViewModel.Selected}"
                                             BorderThickness="0"
                                             Background="Transparent"
                                             ScrollViewer.VerticalScrollBarVisibility="Auto">
                                        <ListBox.ItemTemplate>
                                            <DataTemplate>
                                                <Border CornerRadius="6"
                                                        Padding="12"
                                                        Margin="0,4"
                                                        Background="#FFFFFF"
                                                        BorderBrush="#E1E8ED"
                                                        BorderThickness="1">
                                                    <StackPanel>
                                                        <TextBlock Text="{Binding Interval}"
                                                               FontWeight="SemiBold"
                                                               FontSize="13"
                                                               Foreground="#2C3E50"/>
                                                        <TextBlock Text="{Binding Interval.Duration, StringFormat=Длина: {0}}"
                                                               FontSize="11"
                                                               Foreground="#7F8C8D"
                                                               Margin="0,2,0,6"/>
                                                        <Border Background="#F0F7FF" 
                                                                CornerRadius="4" 
                                                                Padding="6,3" 
                                                                HorizontalAlignment="Left">
                                                            <StackPanel Orientation="Horizontal">
                                                                <Path Data="M3,18 L21,18 L21,16 L3,16 L3,18 Z M3,13 L21,13 L21,11 L3,11 L3,13 Z M3,6 L3,8 L21,8 L21,6 L3,6 Z" 
                                                                      Fill="#2980B9"
                                                                      Width="12"
                                                                      Height="12"
                                                                      Margin="0,0,4,0"/>
                                                                <TextBlock Text="{Binding LinkCount, StringFormat={}{0} соединений}"
                                                                           FontSize="11"
                                                                           Foreground="#2980B9"
                                                                           FontWeight="Medium"/>
                                                            </StackPanel>
                                                        </Border>
                                                    </StackPanel>
                                                </Border>
                                            </DataTemplate>
                                        </ListBox.ItemTemplate>
                                    </ListBox>
                                </Grid>
                            </Border>

                            <Border Style="{StaticResource StatsPanelStyle}">
                                <StackPanel>
                                    <TextBlock Text="Выбранный интервал"
                                               FontSize="12"
                                               Foreground="#7F8C8D"
                                               Margin="0,0,0,4"/>
                                    <TextBlock Text="{Binding CurrentGraph.Interval}"
                                               FontWeight="SemiBold"
                                               FontSize="13"
                                               Foreground="#2C3E50"/>
                                    <StackPanel Orientation="Horizontal"
                                                Margin="0,6,0,0">
                                        <Path Data="M12,2 C6.486,2 2,6.486 2,12 C2,17.514 6.486,22 12,22 C17.514,22 22,17.514 22,12 C22,6.486 17.514,2 12,2 Z M12,20 C7.589,20 4,16.411 4,12 C4,7.589 7.589,4 12,4 C16.411,4 20,7.589 20,12 C20,16.411 16.411,20 12,20 Z M13,7 L11,7 L11,13 L17,13 L17,11 L13,11 L13,7 Z" 
                                              Fill="#7F8C8D"
                                              Width="25"
                                              Height="25"
                                              Margin="0,0,4,0"/>
                                        <TextBlock Text="{Binding CurrentGraph.Interval.Duration}"
                                               FontSize="12"
                                               Foreground="#7F8C8D"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>
                </TabItem>
                <TabItem Header="Соединения">
                    <ScrollViewer Style="{StaticResource CustomScrollViewerStyle}">
                        <StackPanel Margin="15">
                            <Border Style="{StaticResource InnerCardStyle}">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <StackPanel Grid.Row="0"
                                            Orientation="Horizontal"
                                            Margin="0,0,0,12">
                                        <Path Data="M19,3 L5,3 C3.89,3 3,3.9 3,5 L3,19 C3,20.1 3.89,21 5,21 L19,21 C20.1,21 21,20.1 21,19 L21,5 C21,3.9 20.1,3 19,3 Z M19,19 L5,19 L5,5 L19,5 L19,19 Z M7,12 L12,17 L17,12 L12,7 L7,12 Z" 
                                          Fill="#27AE60"
                                          Width="25"
                                          Height="25"
                                          Margin="0,0,8,0"/>
                                        <TextBlock Text="Управление соединениями"
                                               FontWeight="SemiBold"
                                               FontSize="14"
                                               Foreground="#2C3E50"/>
                                    </StackPanel>

                                    <Border Grid.Row="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="*"/>
                                            </Grid.RowDefinitions>

                                            <TextBlock Grid.Row="0"
                                                   Text="Соединения текущего интервала"
                                                   FontWeight="Medium"
                                                   FontSize="12"
                                                   Foreground="#7F8C8D"
                                                   Margin="0,0,0,8"/>

                                            <ListBox x:Name="ConnectionsListBox"
                                                 Grid.Row="1"
                                                 ItemsSource="{Binding CurrentGraph.Links}"
                                                 SelectedItem="{Binding SelectedLink}"
                                                 ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                 BorderThickness="0"
                                                 Background="Transparent"
                                                 MinHeight="300">
                                                <ListBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border CornerRadius="6"
                                                                Padding="12"
                                                                Margin="0,4"
                                                                Background="#FFFFFF"
                                                                BorderBrush="#E1E8ED"
                                                                BorderThickness="1">
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="*"/>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                </Grid.ColumnDefinitions>

                                                                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                                                    <StackPanel Orientation="Horizontal"
                                                                            Margin="0,0,0,4">
                                                                        <TextBlock Text="{Binding NodeA}"
                                                                             FontWeight="SemiBold"
                                                                             Foreground="#2C3E50"/>
                                                                        <TextBlock Text="{Binding Direction, Converter={StaticResource LinkDirectionToArrowConverter}}"
                                                                               Margin="8,0"
                                                                               Foreground="#7F8C8D"
                                                                               FontSize="12"/>
                                                                        <TextBlock Text="{Binding NodeB}"
                                                                               FontWeight="SemiBold"
                                                                               Foreground="#2C3E50"/>
                                                                    </StackPanel>
                                                                </StackPanel>

                                                                <Button Grid.Column="1"
                                                                    Command="{Binding DataContext.CycleDirectionCommand,
                                                                            RelativeSource={RelativeSource AncestorType=ListBox}}"
                                                                    CommandParameter="{Binding}"
                                                                    VerticalAlignment="Center"
                                                                    Width="36"
                                                                    Style="{StaticResource DirectionButtonStyle}">
                                                                    <Button.Content>
                                                                        <TextBlock Text="{Binding Direction, Converter={StaticResource LinkDirectionToArrowConverter}}"
                                                                               FontSize="16"/>
                                                                    </Button.Content>
                                                                </Button>
                                                            </Grid>
                                                        </Border>
                                                    </DataTemplate>
                                                </ListBox.ItemTemplate>
                                            </ListBox>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                            <Border Style="{StaticResource InnerCardStyle}">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0"
                                               Text="Управление направленностью"
                                               FontWeight="SemiBold"
                                               Foreground="#2C3E50"
                                               Margin="0,0,0,12"/>
                                    <StackPanel Grid.Row="1">
                                        <Border Background="#FFFFFF"
                                                CornerRadius="6"
                                                BorderBrush="#D1E3F8"
                                                BorderThickness="1"
                                                Padding="12"
                                                Margin="0,0,0,12">
                                            <StackPanel>
                                                <TextBlock Text="Выбранное соединение"
                                                           FontSize="12"
                                                           Foreground="#7F8C8D"
                                                           Margin="0,0,0,6"/>
                                                <StackPanel Orientation="Horizontal"
                                                            HorizontalAlignment="Center">
                                                    <Ellipse Width="10"
                                                             Height="10"
                                                             VerticalAlignment="Center" 
                                                             Fill="#3498DB"
                                                             Margin="0,0,8,0"/>
                                                    <TextBlock Text="{Binding SelectedLink.NodeA}"
                                                               FontWeight="SemiBold"
                                                               Foreground="#2C3E50"/>
                                                    <TextBlock Text="{Binding SelectedLink.Direction, Converter={StaticResource LinkDirectionToArrowConverter}}"
                                                               Margin="20,0"
                                                               FontSize="18"
                                                               Foreground="#2980B9"/>
                                                    
                                                    <Ellipse Width="10" 
                                                             Height="10"
                                                             Fill="#E74C3C"
                                                             VerticalAlignment="Center" 
                                                             Margin="8,0,8,0"/>
                                                    <TextBlock Text="{Binding SelectedLink.NodeB}"
                                                               FontWeight="SemiBold"
                                                               Foreground="#2C3E50"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                        <StackPanel Orientation="Horizontal"
                                                    HorizontalAlignment="Center"
                                                    Margin="0,10,0,0">
                                            <Button Content="→ Направленное"
                                                    Command="{Binding MakeRightDirectionCommand}"
                                                    CommandParameter="{Binding ElementName=ConnectionsListBox, Path=SelectedItem}"
                                                    Margin="0,0,8,0"
                                                    Style="{StaticResource ModernIconButtonStyle}"
                                                    Height="30"
                                                    Width="125"
                                                    Padding="12,6"
                                                    Focusable="False">
                                            </Button>

                                            <Button Content="↔ Ненаправленное"
                                                    Command="{Binding MakeUndirectedCommand}"
                                                    CommandParameter="{Binding ElementName=ConnectionsListBox, Path=SelectedItem}"
                                                    Margin="0,0,8,0"
                                                    Style="{StaticResource ModernIconButtonStyle}"
                                                    Width="125"
                                                    Height="30"
                                                    Padding="12,6"
                                                    Focusable="False">
                                            </Button>

                                            <Button Content="← Направленное"
                                                    Command="{Binding MakeLeftCommand}"
                                                    CommandParameter="{Binding ElementName=ConnectionsListBox, Path=SelectedItem}"
                                                    Style="{StaticResource ModernIconButtonStyle}"
                                                    Width="125"
                                                    Height="30"
                                                    Padding="12,6"
                                                    Focusable="False">
                                            </Button>
                                        </StackPanel>

                                        <TextBlock Text="Изменения сохраняются до конца сессии"
                                                   FontSize="11"
                                                   Foreground="#27AE60"
                                                   FontStyle="Italic"
                                                   HorizontalAlignment="Center"
                                                   Margin="0,12,0,0"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>
                </TabItem>

                <TabItem Header="Анализ">
                    <ScrollViewer Style="{StaticResource CustomScrollViewerStyle}">
                        <Grid Margin="15">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <Border Style="{StaticResource InnerCardStyle}"
                                    Grid.Row="0">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0" Margin="0,0,20,0">
                                        <TextBlock Text="Вершин:" FontWeight="SemiBold" Foreground="#2C3E50" Margin="0,0,0,6"/>
                                        <TextBlock Text="Рёбер:" FontWeight="SemiBold" Foreground="#2C3E50" Margin="0,0,0,6"/>
                                        <TextBlock Text="Направленных:" FontWeight="SemiBold" Foreground="#2C3E50" Margin="0,0,0,6"/>
                                        <TextBlock Text="Ненаправленных:" FontWeight="SemiBold" Foreground="#2C3E50" Margin="0,0,0,6"/>
                                        <TextBlock Text="Связность:" FontWeight="SemiBold" Foreground="#2C3E50" Margin="0,0,0,6"/>
                                        <TextBlock Text="Циклы:" FontWeight="SemiBold" Foreground="#2C3E50" Margin="0,0,0,6"/>
                                        <TextBlock Text="Плотность:" FontWeight="SemiBold" Foreground="#2C3E50" Margin="0,0,0,6"/>
                                        <TextBlock Text="Диаметр:" FontWeight="SemiBold" Foreground="#2C3E50" Margin="0,0,0,6"/>
                                        <TextBlock Text="Компоненты связности:" FontWeight="SemiBold" Foreground="#2C3E50" Margin="0,0,0,6"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="{Binding AnalysisResult.VertexCount}" 
                                                   Foreground="#2C3E50" Margin="0,0,0,6"/>
                                        <TextBlock Text="{Binding AnalysisResult.EdgeCount}" 
                                                   Foreground="#2C3E50" Margin="0,0,0,6"/>
                                        <TextBlock Text="{Binding AnalysisResult.DirectedLinksCount}" 
                                                   Foreground="#2C3E50" Margin="0,0,0,6"/>
                                        <TextBlock Text="{Binding AnalysisResult.UndirectedLinksCount}" 
                                                   Foreground="#2C3E50" Margin="0,0,0,6"/>
                                        <TextBlock Text="{Binding AnalysisResult.IsConnected, 
                                                            Converter={StaticResource BooleanToYesNoConverter}}" 
                                                   Margin="0,0,0,6"/>
                                        <TextBlock Text="{Binding AnalysisResult.HasCycles, 
                                                            Converter={StaticResource BooleanToYesNoConverter}}" 
                                                   Margin="0,0,0,6"/>
                                        <TextBlock Text="{Binding AnalysisResult.Density, StringFormat={}{0:F4}}" 
                                                   Foreground="#2C3E50" Margin="0,0,0,6"/>
                                        <TextBlock Text="{Binding AnalysisResult.Diameter}" 
                                                   Foreground="#2C3E50" Margin="0,0,0,6"/>
                                        <TextBlock Text="{Binding AnalysisResult.StronglyConnectedComponentsCount}" 
                                                   Foreground="#2C3E50"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                            <TabControl Grid.Row="1">
                                <TabItem Header="Матрица смежности" Style="{StaticResource ModernTabItemStyle}">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <Border Grid.Row="0" Background="#F8F9FA" Padding="0,5" 
                                            BorderThickness="0,0,0,1" BorderBrush="#E0E0E0">
                                            <StackPanel Orientation="Horizontal">
                                                <Border Width="60" Height="40" 
                                                    Background="#3498DB"
                                                    BorderBrush="#B0BEC5" 
                                                    BorderThickness="1"
                                                    Margin="0,0,1,0">
                                                    <TextBlock Text="V\V" 
                                                           HorizontalAlignment="Center" 
                                                           VerticalAlignment="Center"
                                                           FontWeight="Bold"
                                                           Foreground="White"
                                                           FontSize="12"/>
                                                </Border>

                                                <ItemsControl ItemsSource="{Binding AnalysisResult.AdjacencyColumnHeaders}">
                                                    <ItemsControl.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <StackPanel Orientation="Horizontal"/>
                                                        </ItemsPanelTemplate>
                                                    </ItemsControl.ItemsPanel>
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <Border Width="40" 
                                                                Height="40"
                                                                Background="#3498DB"
                                                                BorderBrush="#B0BEC5" 
                                                                BorderThickness="1,1,0,1"
                                                                Margin="0,0,1,0">
                                                                <TextBlock Text="{Binding}" 
                                                                       HorizontalAlignment="Center" 
                                                                       VerticalAlignment="Center"
                                                                       FontWeight="Bold"
                                                                       Foreground="White"
                                                                       FontSize="12"
                                                                       TextTrimming="CharacterEllipsis"/>
                                                            </Border>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>
                                            </StackPanel>
                                        </Border>

                                        <ScrollViewer Grid.Row="1"
                                                  HorizontalScrollBarVisibility="Auto"
                                                  VerticalScrollBarVisibility="Auto"
                                                  Padding="0">
                                            <ItemsControl ItemsSource="{Binding AnalysisResult.AdjacencyMatrixRows}">
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <StackPanel Orientation="Horizontal" Margin="0,1,0,0">
                                                            <Border Width="60" 
                                                                Height="40"
                                                                Background="#3498DB"
                                                                BorderBrush="#B0BEC5" 
                                                                BorderThickness="1,0,1,1"
                                                                Margin="0,0,1,0">
                                                                <TextBlock Text="{Binding RowHeader}" 
                                                                       HorizontalAlignment="Center" 
                                                                       VerticalAlignment="Center"
                                                                       FontWeight="Bold"
                                                                       Foreground="White"
                                                                       FontSize="12"
                                                                       TextTrimming="CharacterEllipsis"/>
                                                            </Border>

                                                            <ItemsControl ItemsSource="{Binding Cells}">
                                                                <ItemsControl.ItemTemplate>
                                                                    <DataTemplate>
                                                                        <Border Width="40" 
                                                                            Height="40"
                                                                            Background="White"
                                                                            BorderBrush="#E0E0E0" 
                                                                            BorderThickness="0,0,1,1"
                                                                            Margin="0,0,1,0">
                                                                            <TextBlock Text="{Binding Value}" 
                                                                                   HorizontalAlignment="Center" 
                                                                                   VerticalAlignment="Center"
                                                                                   FontSize="12"
                                                                                   Foreground="#2C3E50"
                                                                                   FontWeight="SemiBold"/>
                                                                        </Border>
                                                                    </DataTemplate>
                                                                </ItemsControl.ItemTemplate>
                                                                <ItemsControl.ItemsPanel>
                                                                    <ItemsPanelTemplate>
                                                                        <StackPanel Orientation="Horizontal"/>
                                                                    </ItemsPanelTemplate>
                                                                </ItemsControl.ItemsPanel>
                                                            </ItemsControl>
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </ScrollViewer>
                                    </Grid>
                                </TabItem>

                                <TabItem Header="Матрица инцидентности" Style="{StaticResource ModernTabItemStyle}">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <Border Grid.Row="0" Background="#F8F9FA" Padding="0,5" 
                                            BorderThickness="0,0,0,1" BorderBrush="#E0E0E0">
                                            <StackPanel Orientation="Horizontal">
                                                <Border Width="60" Height="40" 
                                                    Background="#2ECC71"
                                                    BorderBrush="#B0BEC5" 
                                                    BorderThickness="1"
                                                    Margin="0,0,1,0">
                                                    <TextBlock Text="V\E" 
                                                           HorizontalAlignment="Center" 
                                                           VerticalAlignment="Center"
                                                           FontWeight="Bold"
                                                           Foreground="White"
                                                           FontSize="12"/>
                                                </Border>

                                                <ItemsControl ItemsSource="{Binding AnalysisResult.IncidenceColumnHeaders}">
                                                    <ItemsControl.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <StackPanel Orientation="Horizontal"/>
                                                        </ItemsPanelTemplate>
                                                    </ItemsControl.ItemsPanel>
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <Border Width="50" 
                                                                Height="40"
                                                                Background="#2ECC71"
                                                                BorderBrush="#B0BEC5" 
                                                                BorderThickness="1,1,0,1"
                                                                Margin="0,0,1,0">
                                                                <TextBlock Text="{Binding}" 
                                                                       HorizontalAlignment="Center" 
                                                                       VerticalAlignment="Center"
                                                                       FontWeight="Bold"
                                                                       Foreground="White"
                                                                       FontSize="11"
                                                                       TextWrapping="Wrap"
                                                                       TextAlignment="Center"/>
                                                            </Border>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>
                                            </StackPanel>
                                        </Border>

                                        <ScrollViewer Grid.Row="1" 
                                                 HorizontalScrollBarVisibility="Auto" 
                                                 VerticalScrollBarVisibility="Auto"
                                                 Padding="0">
                                            <ItemsControl ItemsSource="{Binding AnalysisResult.IncidenceMatrixRows}">
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <StackPanel Orientation="Horizontal" Margin="0,1,0,0">
                                                            <Border Width="60" 
                                                                Height="40"
                                                                Background="#2ECC71"
                                                                BorderBrush="#B0BEC5" 
                                                                BorderThickness="1,0,1,1"
                                                                Margin="0,0,1,0">
                                                                <TextBlock Text="{Binding RowHeader}" 
                                                                       HorizontalAlignment="Center" 
                                                                       VerticalAlignment="Center"
                                                                       FontWeight="Bold"
                                                                       Foreground="White"
                                                                       FontSize="12"
                                                                       TextTrimming="CharacterEllipsis"/>
                                                            </Border>

                                                            <ItemsControl ItemsSource="{Binding Cells}">
                                                                <ItemsControl.ItemTemplate>
                                                                    <DataTemplate>
                                                                        <Border Width="50" 
                                                                            Height="40"
                                                                            Background="White"
                                                                            BorderBrush="#E0E0E0" 
                                                                            BorderThickness="0,0,1,1"
                                                                            Margin="0,0,1,0">
                                                                            <TextBlock Text="{Binding Value}" 
                                                                                   HorizontalAlignment="Center" 
                                                                                   VerticalAlignment="Center"
                                                                                   FontSize="12"
                                                                                   Foreground="#2C3E50"
                                                                                   FontWeight="SemiBold"/>
                                                                        </Border>
                                                                    </DataTemplate>
                                                                </ItemsControl.ItemTemplate>
                                                                <ItemsControl.ItemsPanel>
                                                                    <ItemsPanelTemplate>
                                                                        <StackPanel Orientation="Horizontal"/>
                                                                    </ItemsPanelTemplate>
                                                                </ItemsControl.ItemsPanel>
                                                            </ItemsControl>
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </ScrollViewer>
                                    </Grid>
                                </TabItem>
                            </TabControl>
                        </Grid>
                    </ScrollViewer>
                </TabItem>

                <TabItem Header="Достижимость">
                    <ScrollViewer Style="{StaticResource CustomScrollViewerStyle}">
                        <StackPanel Margin="20">
                            <Border Style="{StaticResource InnerCardStyle}">
                                <StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                        <Path Data="M12,2 C6.48,2 2,6.48 2,12 C2,17.52 6.48,22 22,22 C17.52,22 22,17.52 22,12 C22,6.48 17.52,2 12,2 Z M12,20 C7.59,20 4,16.411 4,12 C4,7.589 7.59,4 12,4 C16.41,4 20,7.589 20,12 C20,16.411 16.41,20 12,20 Z M16.59,7.58 L10,14.17 L7.41,11.59 L6,13 L10,17 L18,9 L16.59,7.58 Z"
                                              Fill="#9B59B6"
                                              Width="25"
                                              Height="25"
                                              Margin="0,0,8,0"/>
                                        <TextBlock Text="Анализ достижимости"
                                                   FontWeight="SemiBold"
                                                   FontSize="14"
                                                   Foreground="#2C3E50"/>
                                    </StackPanel>

                                    <TextBlock Text="Исходное устройство:"
                                               FontWeight="Medium"
                                               Foreground="#2C3E50"
                                               Margin="0,0,0,4"/>
                                    <TextBox Text="{Binding ReachabilityViewModel.Src, UpdateSourceTrigger=PropertyChanged}" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Margin="0,0,0,12"/>

                                    <TextBlock Text="Целевые устройства (через запятую):"
                                               FontWeight="Medium"
                                               Foreground="#2C3E50"
                                               Margin="0,0,0,4"/>
                                    <TextBox Text="{Binding ReachabilityViewModel.Targets, UpdateSourceTrigger=PropertyChanged}"
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Margin="0,0,0,12"/>

                                    <TextBlock Text="Размер данных (байт, опционально):"
                                               FontWeight="Medium"
                                               Foreground="#2C3E50"
                                               Margin="0,0,0,4"/>
                                    <TextBox Text="{Binding ReachabilityViewModel.DataSize, UpdateSourceTrigger=PropertyChanged}"
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Margin="0,0,0,12"/>

                                    <TextBlock Text="Интервал времени"
                                               FontWeight="Medium"
                                               Foreground="#2C3E50"
                                               Margin="0,0,0,4"/>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBox Text="{Binding ReachabilityViewModel.Start, UpdateSourceTrigger=PropertyChanged}"
                                                 Width="120"
                                                 Style="{StaticResource ModernTextBoxStyle}"
                                                 Margin="0,0,12,0"/>
                                        <TextBlock Text="—"
                                                   VerticalAlignment="Center"
                                                   Margin="0,0,12,0"
                                                   Foreground="#7F8C8D"/>
                                        <TextBox Text="{Binding ReachabilityViewModel.End, UpdateSourceTrigger=PropertyChanged}"
                                                 Width="120"
                                                 Style="{StaticResource ModernTextBoxStyle}"/>
                                    </StackPanel>

                                    <Button Command="{Binding ReachabilityViewModel.CalculateReachabilityCommand}"
                                            Height="30"
                                            Content="Рассчитать достижимость"
                                            Padding="12,8"
                                            HorizontalAlignment="Left"
                                            Margin="0,20,0,0"
                                            Style="{StaticResource ModernIconButtonStyle}"/>
                                </StackPanel>
                            </Border>

                            <Border Background="#FFF3CD"
                                    CornerRadius="6"
                                    Padding="15"
                                    Margin="0,15,0,0"
                                    Visibility="{Binding ReachabilityViewModel.Result, 
                                                  Converter={StaticResource NullToVisibilityConverter}}">
                                <StackPanel Orientation="Horizontal">
                                    <Path Data="M12,2C6.48,2 2,6.48 2,12s4.48,10 10,10 10-4.48 10-10S17.52,2 12,2zm1,15h-2v-2h2v2zm0-4h-2V7h2v6z"
                                          Fill="#856404"
                                          Width="20"
                                          Height="20"
                                          Margin="0,0,10,0"
                                          VerticalAlignment="Top"/>
                                    <TextBlock Text="Результаты анализа ещё не рассчитаны. Заполните параметры и нажмите 'Рассчитать достижимость'."
                                               TextWrapping="Wrap"
                                               Foreground="#856404"
                                               FontWeight="Medium"/>
                                </StackPanel>
                            </Border>

                            <Border Background="#F5F5F5"
                                    CornerRadius="6"
                                    Padding="15"
                                    Margin="0,15,0,0"
                                    Visibility="{Binding ReachabilityViewModel.Result, 
                                                  Converter={StaticResource InverseNullToVisibilityConverter}}">
                                                <StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                        <Ellipse Width="12" Height="12" 
                                                 Fill="{Binding ReachabilityViewModel.Result.IsReachable, 
                                                         Converter={StaticResource BoolToColorConverter}}"
                                                 VerticalAlignment="Center"
                                                 Margin="0,0,8,0"/>
                                        <TextBlock Text="{Binding ReachabilityViewModel.Result.Message}"
                                                   TextWrapping="Wrap"
                                                   FontWeight="SemiBold"
                                                   Foreground="#2C3E50"/>
                                    </StackPanel>
                                                    
                                    <ItemsControl ItemsSource="{Binding ReachabilityViewModel.AllPaths}" 
                                                  Margin="0,10,0,0"
                                                  Visibility="{Binding ReachabilityViewModel.AllPaths, 
                                                                Converter={StaticResource NullOrEmptyToVisibilityConverter}}">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Background="#FFFFFF"
                                                        CornerRadius="4"
                                                        BorderBrush="#E1E8ED"
                                                        BorderThickness="1"
                                                        Padding="12"
                                                        Margin="0,0,0,8"
                                                        SnapsToDevicePixels="True">
                                                    <StackPanel>
                                                        <TextBlock Text="Путь:"
                                                                   FontWeight="SemiBold"
                                                                   Foreground="#2C3E50"
                                                                   Margin="0,0,0,4"/>
                                                        <TextBlock Text="{Binding Path, Converter={StaticResource PathToStringConverter}}"
                                                                   TextWrapping="Wrap"
                                                                   Foreground="#1A5276"
                                                                   FontFamily="Consolas"
                                                                   Margin="0,0,0,6"/>

                                                        <TextBlock Text="Интервал:"
                                                                   FontWeight="SemiBold"
                                                                   Foreground="#2C3E50"
                                                                   Margin="0,0,0,4"/>
                                                        <TextBlock Text="{Binding Interval, 
                                                                   Converter={StaticResource TimeIntervalToStringConverter}}"
                                                                   Foreground="#7D3C98"/>
                                                    </StackPanel>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>

                                    <TextBlock Text="Пути не найдены"
                                               FontStyle="Italic"
                                               Foreground="#E74C3C"
                                               FontWeight="Medium"
                                               HorizontalAlignment="Center"
                                               Margin="0,15,0,0"
                                               Visibility="{Binding ReachabilityViewModel.AllPaths, 
                                                             Converter={StaticResource NullOrEmptyToVisibilityConverter},
                                                             ConverterParameter=Inverse}"/>

                                    <Border Background="#E8F4FD"
                                            CornerRadius="4"
                                            Padding="12"
                                            Margin="0,15,0,0"
                                            Visibility="{Binding ReachabilityViewModel.Result.ShortestPathLength, 
                                                          Converter={StaticResource NullToVisibilityConverter}}">
                                        <StackPanel>
                                            <TextBlock Text="Кратчайший путь:"
                                                       FontWeight="SemiBold"
                                                       Foreground="#1976D2"
                                                       Margin="0,0,0,6"/>
                                            <StackPanel Orientation="Horizontal">
                                                <Path Data="M12,17.27L18.18,21l-1.64-7.03L22,9.24l-7.19-.61L12,2 9.19,8.63 2,9.24l5.46,4.73L5.82,21z"
                                                      Fill="#9B59B6"
                                                      Width="20"
                                                      Height="20"
                                                      Margin="0,0,8,0"
                                                      VerticalAlignment="Center"/>
                                                <TextBlock Text="{Binding ReachabilityViewModel.Result.ShortestPathLength, 
                                                                  StringFormat='{}{0} шаг(ов)'}"
                                                           FontWeight="Bold"
                                                           Foreground="#9B59B6"
                                                           FontSize="16"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>
                </TabItem>
                <TabItem Header="Функциональная библиотека" 
                         Style="{StaticResource ModernTabItemStyle}">
                    <TabControl Grid.Row="1" Margin="0,15,0,0" 
                                        Style="{StaticResource ModernTabControlStyle}">
                        <TabItem Header="Процессы" 
                                 Style="{StaticResource ModernTabItemStyle}">
                            <ScrollViewer Style="{StaticResource CustomScrollViewerStyle}">
                                <StackPanel Margin="20">
                                    <Border Style="{StaticResource InnerCardStyle}" Margin="0,0,0,15">
                                        <StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                                <Path Data="M12,2 L22,12 L12,22 L2,12 Z M4,12 L12,4 L20,12 L12,20 Z M11,7 L11,17 L13,17 L13,7 Z M7,11 L17,11 L17,13 L7,13 Z"
                                                      Fill="#3498DB"
                                                      Width="25"
                                                      Height="25"
                                                      Margin="0,0,8,0"/>
                                                <TextBlock Text="Управление процессами"
                                                           FontWeight="SemiBold"
                                                           FontSize="14"
                                                           Foreground="#2C3E50"/>
                                            </StackPanel>

                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                                    <TextBlock Text="ID процесса:"
                                                               FontWeight="Medium"
                                                               Foreground="#2C3E50"
                                                               Margin="0,0,0,4"/>
                                                    <TextBox Text="{Binding LibraryViewModel.ProcessId, UpdateSourceTrigger=PropertyChanged,
                                                        Mode=TwoWay}" 
                                                             Style="{StaticResource ModernTextBoxStyle}"
                                                             Margin="0,0,0,12"/>

                                                    <TextBlock Text="Время обработки:"
                                                               FontWeight="Medium"
                                                               Foreground="#2C3E50"
                                                               Margin="0,0,0,4"/>
                                                    <TextBox Text="{Binding LibraryViewModel.TimeProcess, UpdateSourceTrigger=LostFocus,
                                                        Mode=TwoWay}"
                                                             Style="{StaticResource ModernTextBoxStyle}"
                                                             Margin="0,0,0,12"/>
                                                </StackPanel>

                                                <StackPanel Grid.Column="1" Margin="5,0,5,0">
                                                    <TextBlock Text="Тип входного потока:"
                                                               FontWeight="Medium"
                                                               Foreground="#2C3E50"
                                                               Margin="0,0,0,4"/>
                                                    <TextBox Text="{Binding LibraryViewModel.InputFlowType, UpdateSourceTrigger=PropertyChanged,
                                                        Mode=TwoWay}"
                                                             Style="{StaticResource ModernTextBoxStyle}"
                                                             Margin="0,0,0,12"/>

                                                    <TextBlock Text="Тип выходного потока:"
                                                               FontWeight="Medium"
                                                               Foreground="#2C3E50"
                                                               Margin="0,0,0,4"/>
                                                    <TextBox Text="{Binding LibraryViewModel.OutputFlowType, UpdateSourceTrigger=PropertyChanged,
                                                        Mode=TwoWay}"
                                                             Style="{StaticResource ModernTextBoxStyle}"
                                                             Margin="0,0,0,12"/>
                                                </StackPanel>

                                                <StackPanel Grid.Column="2" Margin="10,0,0,0">
                                                    <TextBlock Text="Размер обрабатываемого блока:"
                                                               FontWeight="Medium"
                                                               Foreground="#2C3E50"
                                                               Margin="0,0,0,4"/>
                                                    <TextBox Text="{Binding LibraryViewModel.ProcessChunkSize, UpdateSourceTrigger=LostFocus,
                                                        Mode=TwoWay}"
                                                             Style="{StaticResource ModernTextBoxStyle}"
                                                             Margin="0,0,0,12"/>

                                                    <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                                                        <Button Command="{Binding LibraryViewModel.AddProcessCommand}"
                                                                Height="30"
                                                                Content="Добавить"
                                                                Padding="12,8"
                                                                HorizontalAlignment="Left"
                                                                Margin="0,0,8,0"
                                                                Style="{StaticResource ModernIconButtonStyle}"/>

                                                        <Button Command="{Binding LibraryViewModel.UpdateProcessCommand}"
                                                                Height="30"
                                                                Content="Обновить"
                                                                Padding="12,8"
                                                                HorizontalAlignment="Left"
                                                                Margin="0,0,8,0"
                                                                Style="{StaticResource ModernIconButtonStyle}"/>

                                                        <Button Command="{Binding LibraryViewModel.RemoveProcessCommand}"
                                                                Height="30"
                                                                Content="Удалить"
                                                                Padding="12,8"
                                                                HorizontalAlignment="Left"
                                                                Style="{StaticResource ModernIconButtonStyle}"
                                                                Background="#E74C3C"
                                                                Foreground="White"
                                                                BorderBrush="#C0392B"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Grid>
                                        </StackPanel>
                                    </Border>

                                    <Border Style="{StaticResource InnerCardStyle}">
                                        <StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                                <Path Data="M4,4 L20,4 L20,20 L4,20 Z M6,6 L18,6 L18,18 L6,18 Z M8,8 L16,8 L16,10 L8,10 Z M8,12 L16,12 L16,14 L8,14 Z M8,16 L13,16 L13,18 L8,18 Z"
                                                      Fill="#27AE60"
                                                      Width="25"
                                                      Height="25"
                                                      Margin="0,0,8,0"/>
                                                <TextBlock Text="Доступные процессы"
                                                           FontWeight="SemiBold"
                                                           FontSize="14"
                                                           Foreground="#2C3E50"/>
                                            </StackPanel>

                                            <Border Background="#F8F9FA"
                                                    CornerRadius="4"
                                                    BorderBrush="#E1E8ED"
                                                    BorderThickness="1"
                                                    Height="300">
                                                <ListBox ItemsSource="{Binding LibraryViewModel.Processes}"
                                                         SelectedItem="{Binding LibraryViewModel.SelectedProcess}"
                                                         Background="Transparent"
                                                         BorderThickness="0">
                                                    <ListBox.ItemTemplate>
                                                        <DataTemplate>
                                                            <Border Background="#FFFFFF"
                                                                    CornerRadius="4"
                                                                    BorderBrush="#E1E8ED"
                                                                    BorderThickness="1"
                                                                    Padding="12"
                                                                    Margin="4">
                                                                <Grid>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto"/>
                                                                        <ColumnDefinition Width="*"/>
                                                                        <ColumnDefinition Width="Auto"/>
                                                                    </Grid.ColumnDefinitions>

                                                                    <Ellipse Grid.Column="0" 
                                                                             Width="12" 
                                                                             Height="12" 
                                                                             Fill="#3498DB"
                                                                             VerticalAlignment="Center"
                                                                             Margin="0,0,10,0"/>

                                                                    <StackPanel Grid.Column="1">
                                                                        <TextBlock Text="{Binding Id}"
                                                                                   FontWeight="SemiBold"
                                                                                   Foreground="#2C3E50"
                                                                                   FontSize="13"/>
                                                                        <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                                                            <TextBlock Text="{Binding InputFlowType, StringFormat={}Вход: {0}}"
                                                                                       Foreground="#7F8C8D"
                                                                                       FontSize="11"
                                                                                       Margin="0,0,10,0"/>
                                                                            <TextBlock Text="→"
                                                                                       Foreground="#95A5A6"
                                                                                       FontSize="11"
                                                                                       Margin="0,0,10,0"/>
                                                                            <TextBlock Text="{Binding OutputFlowType, StringFormat={}Выход: {0}}"
                                                                                       Foreground="#7F8C8D"
                                                                                       FontSize="11"/>
                                                                        </StackPanel>
                                                                        <StackPanel Orientation="Horizontal" Margin="0,2,0,0">
                                                                            <TextBlock Text="{Binding TimePerUnit, StringFormat={}Время: {0} с}"
                                                                                       Foreground="#7F8C8D"
                                                                                       FontSize="11"
                                                                                       Margin="0,0,10,0"/>
                                                                            <TextBlock Text="|"
                                                                                       Foreground="#95A5A6"
                                                                                       FontSize="11"
                                                                                       Margin="0,0,10,0"/>
                                                                            <TextBlock Text="{Binding ChunkSize, StringFormat={}Блок: {0}}"
                                                                                       Foreground="#7F8C8D"
                                                                                       FontSize="11"/>
                                                                        </StackPanel>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Border>
                                                        </DataTemplate>
                                                    </ListBox.ItemTemplate>
                                                </ListBox>
                                            </Border>

                                            <TextBlock Text="Выберите процесс из списка для редактирования или удаления"
                                                       FontStyle="Italic"
                                                       Foreground="#95A5A6"
                                                       Margin="0,10,0,0"
                                                       TextAlignment="Center"/>
                                        </StackPanel>
                                    </Border>

                                    <Border Style="{StaticResource InnerCardStyle}" Margin="0,15,0,0">
                                        <StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                                <Path Data="M19,13 L13,13 L13,19 L11,19 L11,13 L5,13 L5,11 L11,11 L11,5 L13,5 L13,11 L19,11 Z"
                                                      Fill="#9B59B6"
                                                      Width="25"
                                                      Height="25"
                                                      Margin="0,0,8,0"/>
                                                <TextBlock Text="Импорт/Экспорт библиотеки"
                                                           FontWeight="SemiBold"
                                                           FontSize="14"
                                                           Foreground="#2C3E50"/>
                                            </StackPanel>

                                            <StackPanel Orientation="Horizontal">
                                                <Button Command="{Binding LoadFunctionLibraryCommand}"
                                                        Height="30"
                                                        Content="Загрузить из XML"
                                                        Padding="12,8"
                                                        HorizontalAlignment="Left"
                                                        Margin="0,0,8,0"
                                                        Style="{StaticResource ModernIconButtonStyle}"/>

                                                <Button Height="30"
                                                        Content="Экспорт в XML"
                                                        Padding="12,8"
                                                        HorizontalAlignment="Left"
                                                        Style="{StaticResource ModernIconButtonStyle}"
                                                        Background="#27AE60"
                                                        BorderBrush="#219653">
                                                </Button>
                                            </StackPanel>

                                            <TextBlock Text="Загрузите XML файл с описанием процессов для пополнения библиотеки"
                                                       FontStyle="Italic"
                                                       Foreground="#95A5A6"
                                                       Margin="0,10,0,0"
                                                       TextWrapping="Wrap"/>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>
                        </TabItem>
                        <TabItem Header="Транспорт" 
                                Style="{StaticResource ModernTabItemStyle}">
                            <ScrollViewer Style="{StaticResource CustomScrollViewerStyle}">
                                <StackPanel Margin="20">
                                    <Border Style="{StaticResource InnerCardStyle}" Margin="0,0,0,15">
                                        <StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                                <Path Data="M12,2 L2,12 L12,22 L22,12 Z M4,12 L12,4 L20,12 L12,20 Z M8,7 L8,17 L16,17 L16,7 Z"
                                                      Fill="#3498DB"
                                                      Width="25"
                                                      Height="25"
                                                      Margin="0,0,8,0"/>
                                                <TextBlock Text="Управление транспортом"
                                                           FontWeight="SemiBold"
                                                           FontSize="14"
                                                           Foreground="#2C3E50"/>
                                            </StackPanel>

                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                                    <TextBlock Text="ID транспорта:"
                                                               FontWeight="Medium"
                                                               Foreground="#2C3E50"
                                                               Margin="0,0,0,4"/>
                                                    <TextBox Text="{Binding LibraryViewModel.TransportId, UpdateSourceTrigger=PropertyChanged}"
                                                             Style="{StaticResource ModernTextBoxStyle}"
                                                             Margin="0,0,0,12"/>

                                                    <TextBlock Text="Время передачи:"
                                                               FontWeight="Medium"
                                                               Foreground="#2C3E50"
                                                               Margin="0,0,0,4"/>
                                                    <TextBox Text="{Binding LibraryViewModel.TransportTime, UpdateSourceTrigger=LostFocus}"
                                                             Style="{StaticResource ModernTextBoxStyle}"
                                                             Margin="0,0,0,12"/>
                                                </StackPanel>

                                                <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                                    <TextBlock Text="Тип потока:"
                                                               FontWeight="Medium"
                                                               Foreground="#2C3E50"
                                                               Margin="0,0,0,4"/>
                                                    <TextBox Text="{Binding LibraryViewModel.TransportFlowType, UpdateSourceTrigger=PropertyChanged}"
                                                             Style="{StaticResource ModernTextBoxStyle}"
                                                             Margin="0,0,0,12"/>

                                                    <TextBlock Text="Емкость:"
                                                               FontWeight="Medium"
                                                               Foreground="#2C3E50"
                                                               Margin="0,0,0,4"/>
                                                    <TextBox Text="{Binding LibraryViewModel.TransportCapacity, UpdateSourceTrigger=LostFocus}"
                                                             Style="{StaticResource ModernTextBoxStyle}"
                                                             Margin="0,0,0,12"/>

                                                    <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                                                        <Button Command="{Binding LibraryViewModel.AddTransportCommand}"
                                                                Height="30"
                                                                Content="Добавить"
                                                                Padding="12,8"
                                                                HorizontalAlignment="Left"
                                                                Margin="0,0,8,0"
                                                                Style="{StaticResource ModernIconButtonStyle}"/>

                                                        <Button Command="{Binding LibraryViewModel.UpdateTransportCommand}"
                                                                Height="30"
                                                                Content="Обновить"
                                                                Padding="12,8"
                                                                HorizontalAlignment="Left"
                                                                Margin="0,0,8,0"
                                                                Style="{StaticResource ModernIconButtonStyle}"/>

                                                        <Button Command="{Binding LibraryViewModel.RemoveTransportCommand}"
                                                                Height="30"
                                                                Content="Удалить"
                                                                Padding="12,8"
                                                                HorizontalAlignment="Left"
                                                                Style="{StaticResource ModernIconButtonStyle}"
                                                                Background="#E74C3C"
                                                                Foreground="White"
                                                                BorderBrush="#C0392B"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Grid>
                                        </StackPanel>
                                    </Border>

                                    <Border Style="{StaticResource InnerCardStyle}">
                                        <StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                                <Path Data="M12,2 L2,12 L12,22 L22,12 Z M4,12 L12,4 L20,12 L12,20 Z M8,7 L8,17 L16,17 L16,7 Z"
                                                      Fill="#27AE60"
                                                      Width="25"
                                                      Height="25"
                                                      Margin="0,0,8,0"/>
                                                <TextBlock Text="Доступные типы транспорта"
                                                           FontWeight="SemiBold"
                                                           FontSize="14"
                                                           Foreground="#2C3E50"/>
                                            </StackPanel>

                                            <Border Background="#F8F9FA"
                                                    CornerRadius="4"
                                                    BorderBrush="#E1E8ED"
                                                    BorderThickness="1"
                                                    Height="300">
                                                <ListBox ItemsSource="{Binding LibraryViewModel.Transports}"
                                                         SelectedItem="{Binding LibraryViewModel.SelectedTransport}"
                                                         Background="Transparent"
                                                         BorderThickness="0">
                                                    <ListBox.ItemTemplate>
                                                        <DataTemplate>
                                                            <Border Background="#FFFFFF"
                                                                    CornerRadius="4"
                                                                    BorderBrush="#E1E8ED"
                                                                    BorderThickness="1"
                                                                    Padding="12"
                                                                    Margin="4">
                                                                <Grid>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto"/>
                                                                        <ColumnDefinition Width="*"/>
                                                                        <ColumnDefinition Width="Auto"/>
                                                                    </Grid.ColumnDefinitions>

                                                                    <Ellipse Grid.Column="0" 
                                                                             Width="12" 
                                                                             Height="12" 
                                                                             Fill="#9B59B6"
                                                                             VerticalAlignment="Center"
                                                                             Margin="0,0,10,0"/>

                                                                    <StackPanel Grid.Column="1">
                                                                        <TextBlock Text="{Binding Id}"
                                                                                    FontWeight="SemiBold"
                                                                                    Foreground="#2C3E50"
                                                                                    FontSize="13"/>
                                                                        <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                                                            <TextBlock Text="{Binding FlowType, StringFormat={}Тип: {0}}"
                                                                                       Foreground="#7F8C8D"
                                                                                       FontSize="11"
                                                                                       Margin="0,0,10,0"/>
                                                                        </StackPanel>
                                                                        <StackPanel Orientation="Horizontal" Margin="0,2,0,0">
                                                                            <TextBlock Text="{Binding Time, StringFormat={}Время: {0} с}"
                                                                                       Foreground="#7F8C8D"
                                                                                       FontSize="11"
                                                                                       Margin="0,0,10,0"/>
                                                                            <TextBlock Text="|"
                                                                                       Foreground="#95A5A6"
                                                                                       FontSize="11"
                                                                                       Margin="0,0,10,0"/>
                                                                            <TextBlock Text="{Binding Capacity, StringFormat={}Емкость: {0}}"
                                                                                       Foreground="#7F8C8D"
                                                                                       FontSize="11"/>
                                                                        </StackPanel>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Border>
                                                        </DataTemplate>
                                                    </ListBox.ItemTemplate>
                                                </ListBox>
                                            </Border>

                                            <TextBlock Text="Выберите транспорт из списка для редактирования или удаления"
                                                       FontStyle="Italic"
                                                       Foreground="#95A5A6"
                                                       Margin="0,10,0,0"
                                                       TextAlignment="Center"/>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>
                        </TabItem>

                        <TabItem Header="Хранилища" 
                                 Style="{StaticResource ModernTabItemStyle}">
                            <ScrollViewer Style="{StaticResource CustomScrollViewerStyle}">
                                <StackPanel Margin="20">
                                    <Border Style="{StaticResource InnerCardStyle}" Margin="0,0,0,15">
                                        <StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                                <Path Data="M19,5 L5,5 L5,19 L19,19 Z M4,4 L20,4 L20,20 L4,20 Z M12,8 L12,16 L16,16 L16,8 Z M8,8 L8,12 L10,12 L10,8 Z"
                                                      Fill="#3498DB"
                                                      Width="25"
                                                      Height="25"
                                                      Margin="0,0,8,0"/>
                                                <TextBlock Text="Управление хранилищами"
                                                           FontWeight="SemiBold"
                                                           FontSize="14"
                                                           Foreground="#2C3E50"/>
                                            </StackPanel>

                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                                    <TextBlock Text="ID хранилища:"
                                                               FontWeight="Medium"
                                                               Foreground="#2C3E50"
                                                               Margin="0,0,0,4"/>
                                                    <TextBox Text="{Binding LibraryViewModel.StorageId, UpdateSourceTrigger=PropertyChanged}"
                                                             Style="{StaticResource ModernTextBoxStyle}"
                                                             Margin="0,0,0,12"/>

                                                    <TextBlock Text="Разрешенные типы потоков:"
                                                               FontWeight="Medium"
                                                               Foreground="#2C3E50"
                                                               Margin="0,0,0,4"/>
                                                    <TextBox Text="{Binding LibraryViewModel.StorageAllowedFlowType, UpdateSourceTrigger=PropertyChanged}"
                                                             Style="{StaticResource ModernTextBoxStyle}"
                                                             Margin="0,0,0,12"/>

                                                    <TextBlock Text="(через запятую, например: 1, 2, 3)"
                                                               FontStyle="Italic"
                                                               Foreground="#95A5A6"
                                                               FontSize="11"
                                                               Margin="0,-8,0,12"/>
                                                </StackPanel>

                                                <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                                    <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                                                        <Button Command="{Binding LibraryViewModel.AddStorageCommand}"
                                                                Height="30"
                                                                Content="Добавить"
                                                                Padding="12,8"
                                                                HorizontalAlignment="Left"
                                                                Margin="0,0,8,0"
                                                                Style="{StaticResource ModernIconButtonStyle}"/>

                                                        <Button Command="{Binding LibraryViewModel.UpdateStorageCommand}"
                                                                Height="30"
                                                                Content="Обновить"
                                                                Padding="12,8"
                                                                HorizontalAlignment="Left"
                                                                Margin="0,0,8,0"
                                                                Style="{StaticResource ModernIconButtonStyle}"/>

                                                        <Button Command="{Binding LibraryViewModel.RemoveStorageCommand}"
                                                                Height="30"
                                                                Content="Удалить"
                                                                Padding="12,8"
                                                                HorizontalAlignment="Left"
                                                                Style="{StaticResource ModernIconButtonStyle}"
                                                                Background="#E74C3C"
                                                                Foreground="White"
                                                                BorderBrush="#C0392B"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Grid>
                                        </StackPanel>
                                    </Border>

                                    <Border Style="{StaticResource InnerCardStyle}">
                                        <StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                                <Path Data="M19,5 L5,5 L5,19 L19,19 Z M4,4 L20,4 L20,20 L4,20 Z M12,8 L12,16 L16,16 L16,8 Z M8,8 L8,12 L10,12 L10,8 Z"
                                                      Fill="#27AE60"
                                                      Width="25"
                                                      Height="25"
                                                      Margin="0,0,8,0"/>
                                                <TextBlock Text="Доступные типы хранилищ"
                                                           FontWeight="SemiBold"
                                                           FontSize="14"
                                                           Foreground="#2C3E50"/>
                                            </StackPanel>

                                            <Border Background="#F8F9FA"
                                                    CornerRadius="4"
                                                    BorderBrush="#E1E8ED"
                                                    BorderThickness="1"
                                                    Height="300">
                                                <ListBox ItemsSource="{Binding LibraryViewModel.Storages}"
                                                         SelectedItem="{Binding LibraryViewModel.SelectedStorage}"
                                                         Background="Transparent"
                                                         BorderThickness="0">
                                                    <ListBox.ItemTemplate>
                                                        <DataTemplate>
                                                            <Border Background="#FFFFFF"
                                                                    CornerRadius="4"
                                                                    BorderBrush="#E1E8ED"
                                                                    BorderThickness="1"
                                                                    Padding="12"
                                                                    Margin="4">
                                                                <Grid>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto"/>
                                                                        <ColumnDefinition Width="*"/>
                                                                    </Grid.ColumnDefinitions>

                                                                    <Ellipse Grid.Column="0" 
                                                                             Width="12" 
                                                                             Height="12" 
                                                                             Fill="#E67E22"
                                                                             VerticalAlignment="Center"
                                                                             Margin="0,0,10,0"/>

                                                                    <StackPanel Grid.Column="1">
                                                                        <TextBlock Text="{Binding Id}"
                                                                                   FontWeight="SemiBold"
                                                                                   Foreground="#2C3E50"
                                                                                   FontSize="13"/>
                                                                        <TextBlock Text="{Binding AllowedFlowTypes, 
                                                                                       Converter={StaticResource CollectionToStringConverter}}"
                                                                                   Foreground="#7F8C8D"
                                                                                   FontSize="11"
                                                                                   Margin="0,4,0,0"
                                                                                   TextWrapping="Wrap"/>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Border>
                                                        </DataTemplate>
                                                    </ListBox.ItemTemplate>
                                                </ListBox>
                                            </Border>

                                            <TextBlock Text="Выберите хранилище из списка для редактирования или удаления"
                                                       FontStyle="Italic"
                                                       Foreground="#95A5A6"
                                                       Margin="0,10,0,0"
                                                       TextAlignment="Center"/>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>
                        </TabItem>
                        <TabItem Header="Потоки данных" 
                                 Style="{StaticResource ModernTabItemStyle}">
                            <ScrollViewer Style="{StaticResource CustomScrollViewerStyle}">
                                <StackPanel Margin="20">
                                    <Border Style="{StaticResource InnerCardStyle}" Margin="0,0,0,15">
                                        <StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                                <Path Data="M19,3 L5,3 L5,21 L19,21 Z M4,2 L20,2 L20,22 L4,22 Z M8,7 L16,7 L16,9 L8,9 Z M8,11 L16,11 L16,13 L8,13 Z M8,15 L13,15 L13,17 L8,17 Z"
                                                      Fill="#3498DB"
                                                      Width="25"
                                                      Height="25"
                                                      Margin="0,0,8,0"/>
                                                <TextBlock Text="Управление потоками данных"
                                                           FontWeight="SemiBold"
                                                           FontSize="14"
                                                           Foreground="#2C3E50"/>
                                            </StackPanel>

                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                                    <TextBlock Text="ID потока:"
                                                               FontWeight="Medium"
                                                               Foreground="#2C3E50"
                                                               Margin="0,0,0,4"/>
                                                    <TextBox Text="{Binding DataFlowViewModel.DataFlowId, UpdateSourceTrigger=PropertyChanged}"
                                                             Style="{StaticResource ModernTextBoxStyle}"
                                                             Margin="0,0,0,12"/>

                                                    <TextBlock Text="Объем:"
                                                               FontWeight="Medium"
                                                               Foreground="#2C3E50"
                                                               Margin="0,0,0,4"/>
                                                    <TextBox Text="{Binding DataFlowViewModel.DataFlowVolume, UpdateSourceTrigger=LostFocus}"
                                                             Style="{StaticResource ModernTextBoxStyle}"
                                                             Margin="0,0,0,12"/>
                                                </StackPanel>

                                                <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                                    <TextBlock Text="Преобразования:"
                                                               FontWeight="Medium"
                                                               Foreground="#2C3E50"
                                                               Margin="0,0,0,4"/>
                                                    <TextBox Text="{Binding DataFlowViewModel.DataFlowTransformations, UpdateSourceTrigger=PropertyChanged}"
                                                             Style="{StaticResource ModernTextBoxStyle}"
                                                             Height="80"
                                                             TextWrapping="Wrap"
                                                             AcceptsReturn="True"
                                                             VerticalScrollBarVisibility="Auto"
                                                             Margin="0,0,0,12"/>

                                                    <TextBlock Text="(формат: вход1->выход1; вход2->выход2)"
                                                               FontStyle="Italic"
                                                               Foreground="#95A5A6"
                                                               FontSize="11"
                                                               Margin="0,-8,0,12"/>

                                                    <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                                                        <Button Command="{Binding DataFlowViewModel.AddDataFlowCommand}"
                                                                Height="30"
                                                                Content="Добавить"
                                                                Padding="12,8"
                                                                HorizontalAlignment="Left"
                                                                Margin="0,0,8,0"
                                                                Style="{StaticResource ModernIconButtonStyle}"/>

                                                        <Button Command="{Binding DataFlowViewModel.UpdateDataFlowCommand}"
                                                                Height="30"
                                                                Content="Обновить"
                                                                Padding="12,8"
                                                                HorizontalAlignment="Left"
                                                                Margin="0,0,8,0"
                                                                Style="{StaticResource ModernIconButtonStyle}"/>

                                                        <Button Command="{Binding DataFlowViewModel.RemoveDataFlowCommand}"
                                                                Height="30"
                                                                Content="Удалить"
                                                                Padding="12,8"
                                                                HorizontalAlignment="Left"
                                                                Style="{StaticResource ModernIconButtonStyle}"
                                                                Foreground="White"
                                                                Background="#E74C3C"
                                                                BorderBrush="#C0392B"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Grid>
                                        </StackPanel>
                                    </Border>

                                    <Border Style="{StaticResource InnerCardStyle}">
                                        <StackPanel>
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                                <Path Data="M19,3 L5,3 L5,21 L19,21 Z M4,2 L20,2 L20,22 L4,22 Z M8,7 L16,7 L16,9 L8,9 Z M8,11 L16,11 L16,13 L8,13 Z M8,15 L13,15 L13,17 L8,17 Z"
                                                      Fill="#27AE60"
                                                      Width="25"
                                                      Height="25"
                                                      Margin="0,0,8,0"/>
                                                <TextBlock Text="Доступные потоки данных"
                                                           FontWeight="SemiBold"
                                                           FontSize="14"
                                                           Foreground="#2C3E50"/>
                                            </StackPanel>

                                            <Border Background="#F8F9FA"
                                                    CornerRadius="4"
                                                    BorderBrush="#E1E8ED"
                                                    BorderThickness="1"
                                                    Height="300">
                                                <ListBox ItemsSource="{Binding DataFlowViewModel.DataFlows}"
                                                         SelectedItem="{Binding DataFlowViewModel.SelectedDataFlow}"
                                                         Background="Transparent"
                                                         BorderThickness="0">
                                                    <ListBox.ItemTemplate>
                                                        <DataTemplate>
                                                            <Border Background="#FFFFFF"
                                                                    CornerRadius="4"
                                                                    BorderBrush="#E1E8ED"
                                                                    BorderThickness="1"
                                                                    Padding="12"
                                                                    Margin="4">
                                                                <Grid>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto"/>
                                                                        <ColumnDefinition Width="*"/>
                                                                    </Grid.ColumnDefinitions>

                                                                    <Ellipse Grid.Column="0" 
                                                                             Width="12" 
                                                                             Height="12" 
                                                                             Fill="#3498DB"
                                                                             VerticalAlignment="Center"
                                                                             Margin="0,0,10,0"/>

                                                                    <StackPanel Grid.Column="1">
                                                                        <TextBlock Text="{Binding Id}"
                                                                                   FontWeight="SemiBold"
                                                                                   Foreground="#2C3E50"
                                                                                   FontSize="13"/>

                                                                        <TextBlock Text="{Binding Volume, StringFormat={}Объем: {0}}"
                                                                                    Foreground="#7F8C8D"
                                                                                    FontSize="11"
                                                                                    Margin="0,2,0,0"/>

                                                                        <TextBlock Text="{Binding Transformations, 
                                                                                   Converter={StaticResource TransformationsToStringConverter}}"
                                                                                   Foreground="#7F8C8D"
                                                                                   FontSize="11"
                                                                                   Margin="0,2,0,0"
                                                                                   TextWrapping="Wrap"
                                                                                   FontStyle="Italic"/>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Border>
                                                        </DataTemplate>
                                                    </ListBox.ItemTemplate>
                                                </ListBox>
                                            </Border>

                                            <TextBlock Text="Выберите поток из списка для редактирования или удаления"
                                                       FontStyle="Italic"
                                                       Foreground="#95A5A6"
                                                       Margin="0,10,0,0"
                                                       TextAlignment="Center"/>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>
                        </TabItem>
                    </TabControl>
                </TabItem>
                <TabItem Header="Конфигурации" 
         Style="{StaticResource ModernTabItemStyle}">
                    <ScrollViewer Style="{StaticResource CustomScrollViewerStyle}">
                        <StackPanel Margin="20">
                            <Border Style="{StaticResource InnerCardStyle}" Margin="0,0,0,15">
                                <StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                        <Path Data="M12,2 L2,12 L12,22 L22,12 Z M4,12 L12,4 L20,12 L12,20 Z M7,7 L17,17 M17,7 L7,17"
                              Fill="#3498DB"
                              Width="25"
                              Height="25"
                              Margin="0,0,8,0"/>
                                        <TextBlock Text="Выбор интервала"
                                   FontWeight="SemiBold"
                                   FontSize="14"
                                   Foreground="#2C3E50"/>
                                    </StackPanel>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <ComboBox Grid.Column="0"
                                  ItemsSource="{Binding StructConfigViewModel.AvailableIntervals}"
                                  SelectedItem="{Binding StructConfigViewModel.SelectedInterval}"
                                  Style="{StaticResource ModernComboBoxStyle}"
                                  Margin="0,0,10,0">
       
                                        </ComboBox>

                                        <Button Grid.Column="1"
                                Command="{Binding StructConfigViewModel.LoadFromLibraryCommand}"
                                Height="30"
                                Content="Обновить библиотеку"
                                Padding="12,8"
                                Style="{StaticResource ModernIconButtonStyle}"/>
                                    </Grid>

                                    <TextBlock Text="Выберите временной интервал для редактирования конфигураций"
                               FontStyle="Italic"
                               Foreground="#95A5A6"
                               Margin="0,10,0,0"/>
                                </StackPanel>
                            </Border>

                            <Border Style="{StaticResource InnerCardStyle}" Margin="0,0,0,15">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,12">
                                        <Path Data="M12,2 L2,12 L12,22 L22,12 Z M6,8 L18,8 L18,16 L6,16 Z M8,10 L16,10 L16,14 L8,14 Z"
                              Fill="#27AE60"
                              Width="25"
                              Height="25"
                              Margin="0,0,8,0"/>
                                        <TextBlock Text="Конфигурации узлов"
                                   FontWeight="SemiBold"
                                   FontSize="14"
                                   Foreground="#2C3E50"/>
                                    </StackPanel>

                                    <Border Grid.Row="1" 
                            Background="#F8F9FA"
                            CornerRadius="4"
                            BorderBrush="#E1E8ED"
                            BorderThickness="1"
                            Height="400">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="2*"/>
                                            </Grid.ColumnDefinitions>

                                            <ListBox Grid.Column="0"
                                                     ItemsSource="{Binding StructConfigViewModel.NodeConfigurations}"
                                                     SelectedItem="{Binding StructConfigViewModel.SelectedNodeConfig}"
                                                     Background="Transparent"
                                                     BorderThickness="0"
                                                     BorderBrush="#E1E8ED">
                                                <ListBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border Background="#FFFFFF"
                                                                CornerRadius="2"
                                                                BorderBrush="#E1E8ED"
                                                                BorderThickness="1"
                                                                Padding="8"
                                                                Margin="2">
                                                            <TextBlock Text="{Binding NodeId}"
                                                                       FontWeight="SemiBold"
                                                                       Foreground="#2C3E50"/>
                                                        </Border>
                                                    </DataTemplate>
                                                </ListBox.ItemTemplate>
                                            </ListBox>

                                            <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto">
                                                <StackPanel Margin="10">
                                                    <TextBlock Text="Настройки узла"
                                                               FontWeight="Medium"
                                                               FontSize="13"
                                                               Foreground="#2C3E50"
                                                               Margin="0,0,0,10"/>

                                                    <TextBlock Text="ID узла:"
                                                               FontWeight="Medium"
                                                               Foreground="#2C3E50"
                                                               Margin="0,0,0,4"/>
                                                    <TextBlock Text="{Binding StructConfigViewModel.SelectedNodeConfig.NodeId, UpdateSourceTrigger=PropertyChanged}"
                                                               Margin="0,0,0,12"/>

                                                    <StackPanel Margin="0,0,0,12">
                                                        <TextBlock Text="Разрешенные процессы:"
                                                                   FontWeight="Medium"
                                                                   Foreground="#2C3E50"
                                                                   Margin="0,0,0,4"/>

                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                            </Grid.ColumnDefinitions>

                                                            <ComboBox Grid.Column="0"
                                                                      ItemsSource="{Binding StructConfigViewModel.AvailableProcesses}"
                                                                      SelectedItem="{Binding StructConfigViewModel.SelectedNodeConfig.SelectedProcessToAdd, Mode=TwoWay}"
                                                                      Style="{StaticResource ModernComboBoxStyle}"
                                                                      Margin="0,0,5,0"/>

                                                            <Button Grid.Column="1"
                                                                    Command="{Binding StructConfigViewModel.SelectedNodeConfig.AddProcessCommand}"
                                                                    Content="+"
                                                                    Width="30"
                                                                    Height="30"
                                                                    Style="{StaticResource ModernIconButtonStyle}"/>
                                                        </Grid>

                                                        <ListBox ItemsSource="{Binding StructConfigViewModel.SelectedNodeConfig.EnabledProcesses}"
                                                                 Height="100"
                                                                 Margin="0,5,0,0">
                                                            <ListBox.ItemTemplate>
                                                                <DataTemplate>
                                                                    <Grid>
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="*"/>
                                                                            <ColumnDefinition Width="Auto"/>
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock Grid.Column="0" 
                                                                                   Text="{Binding }"
                                                                                   VerticalAlignment="Center"
                                                                                   Margin="5,0"/>
                                                                        <Button Grid.Column="1"
                                                                                Command="{Binding DataContext.StructConfigViewModel.SelectedNodeConfig.RemoveProcessCommand, 
                                                                                        RelativeSource={RelativeSource AncestorType=ListBox}}"
                                                                                CommandParameter="{Binding}"
                                                                                Content="✕"
                                                                                Width="24"
                                                                                Height="24"
                                                                                Style="{StaticResource ModernIconButtonStyle}"
                                                                                Padding="2"
                                                                                Background="Transparent"
                                                                                BorderThickness="0"/>
                                                                    </Grid>
                                                                </DataTemplate>
                                                            </ListBox.ItemTemplate>
                                                        </ListBox>
                                                    </StackPanel>

                                                    <!-- Входы -->
                                                    <StackPanel Margin="0,0,0,12">
                                                        <TextBlock Text="Входы:"
                                                                   FontWeight="Medium"
                                                                   Foreground="#2C3E50"
                                                                   Margin="0,0,0,4"/>

                                                        <StackPanel Orientation="Horizontal">
                                                            <TextBox Text="{Binding StructConfigViewModel.SelectedNodeConfig.NewInputText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                     Width="150"
                                                                     Style="{StaticResource ModernTextBoxStyle}"
                                                                     Margin="0,0,5,0"/>
                                                            <Button Command="{Binding StructConfigViewModel.SelectedNodeConfig.AddInputCommand}"
                                                                    Content="+"
                                                                    Width="30"
                                                                    Height="30"
                                                                    Style="{StaticResource ModernIconButtonStyle}"/>
                                                        </StackPanel>

                                                        <ListBox ItemsSource="{Binding StructConfigViewModel.SelectedNodeConfig.Inputs}"
                                                                 Height="80"
                                                                 Margin="0,5,0,0">
                                                            <ListBox.ItemTemplate>
                                                                <DataTemplate>
                                                                    <Grid>
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="*"/>
                                                                            <ColumnDefinition Width="Auto"/>
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock Grid.Column="0" 
                                                                                   Text="{Binding }"
                                                                                   VerticalAlignment="Center"
                                                                                   Margin="5,0"/>
                                                                        <Button Grid.Column="1"
                                                                                Command="{Binding DataContext.StructConfigViewModel.SelectedNodeConfig.RemoveInputCommand, 
                                                                                        RelativeSource={RelativeSource AncestorType=ListBox}}"
                                                                                CommandParameter="{Binding}"
                                                                                Content="✕"
                                                                                Width="24"
                                                                                Height="24"
                                                                                Style="{StaticResource ModernIconButtonStyle}"
                                                                                Padding="2"
                                                                                Background="Transparent"
                                                                                BorderThickness="0"/>
                                                                    </Grid>
                                                                </DataTemplate>
                                                            </ListBox.ItemTemplate>
                                                        </ListBox>
                                                    </StackPanel>

                                                    <!-- Выходы -->
                                                    <StackPanel Margin="0,0,0,12">
                                                        <TextBlock Text="Выходы:"
                                                                   FontWeight="Medium"
                                                                   Foreground="#2C3E50"
                                                                   Margin="0,0,0,4"/>

                                                        <StackPanel Orientation="Horizontal">
                                                            <TextBox Text="{Binding StructConfigViewModel.SelectedNodeConfig.NewOutputText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                     Width="150"
                                                                     Style="{StaticResource ModernTextBoxStyle}"
                                                                     Margin="0,0,5,0"/>
                                                            <Button Command="{Binding StructConfigViewModel.SelectedNodeConfig.AddOutputCommand}"
                                                                    Content="+"
                                                                    Width="30"
                                                                    Height="30"
                                                                    Style="{StaticResource ModernIconButtonStyle}"/>
                                                        </StackPanel>

                                                        <ListBox ItemsSource="{Binding StructConfigViewModel.SelectedNodeConfig.Outputs}"
                                                                 Height="80"
                                                                 Margin="0,5,0,0">
                                                            <ListBox.ItemTemplate>
                                                                <DataTemplate>
                                                                    <Grid>
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="*"/>
                                                                            <ColumnDefinition Width="Auto"/>
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock Grid.Column="0" 
                                                                                   Text="{Binding }"
                                                                                   VerticalAlignment="Center"
                                                                                   Margin="5,0"/>
                                                                        <Button Grid.Column="1"
                                                                                Command="{Binding DataContext.StructConfigViewModel.SelectedNodeConfig.RemoveOutputCommand, 
                                                                                        RelativeSource={RelativeSource AncestorType=ListBox}}"
                                                                                CommandParameter="{Binding}"
                                                                                Content="✕"
                                                                                Width="24"
                                                                                Height="24"
                                                                                Style="{StaticResource ModernIconButtonStyle}"
                                                                                Padding="2"
                                                                                Background="Transparent"
                                                                                BorderThickness="0"/>
                                                                    </Grid>
                                                                </DataTemplate>
                                                            </ListBox.ItemTemplate>
                                                        </ListBox>
                                                    </StackPanel>

                                                    <!-- Хранилища -->
                                                    <StackPanel Margin="0,0,0,12">
                                                        <TextBlock Text="Хранилища:"
                                                                   FontWeight="Medium"
                                                                   Foreground="#2C3E50"
                                                                   Margin="0,0,0,4"/>

                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                            </Grid.ColumnDefinitions>

                                                            <ComboBox Grid.Column="0"
                                                                      ItemsSource="{Binding StructConfigViewModel.AvailableStorages}"
                                                                      SelectedItem="{Binding StructConfigViewModel.SelectedNodeConfig.SelectedStorageToAdd, Mode=TwoWay}"
                                                                      Style="{StaticResource ModernComboBoxStyle}"
                                                                      Margin="0,0,5,0"/>

                                                            <Button Grid.Column="1"
                                                                    Command="{Binding StructConfigViewModel.SelectedNodeConfig.AddStorageCommand}"
                                                                    Content="+"
                                                                    Width="30"
                                                                    Height="30"
                                                                    Style="{StaticResource ModernIconButtonStyle}"/>
                                                        </Grid>

                                                        <ListBox ItemsSource="{Binding StructConfigViewModel.SelectedNodeConfig.StorageCapacities}"
                                                                 Height="120"
                                                                 Margin="0,5,0,0">
                                                            <ListBox.ItemTemplate>
                                                                <DataTemplate>
                                                                    <Grid Margin="0,2,0,2">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="*"/>
                                                                            <ColumnDefinition Width="100"/>
                                                                            <ColumnDefinition Width="Auto"/>
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock Grid.Column="0" 
                                                                                   Text="{Binding StorageType}"
                                                                                   VerticalAlignment="Center"
                                                                                   Margin="5,0"/>
                                                                        <TextBox Grid.Column="1"
                                                                                 Text="{Binding Capacity, UpdateSourceTrigger=PropertyChanged}"
                                                                                 Style="{StaticResource ModernTextBoxStyle}"
                                                                                 Margin="5,0"/>
                                                                        <Button Grid.Column="2"
                                                                                Command="{Binding DataContext.StructConfigViewModel.SelectedNodeConfig.RemoveStorageCommand, 
                                                                                        RelativeSource={RelativeSource AncestorType=ListBox}}"
                                                                                CommandParameter="{Binding}"
                                                                                Content="✕"
                                                                                Width="24"
                                                                                Height="24"
                                                                                Style="{StaticResource ModernIconButtonStyle}"
                                                                                Padding="2"
                                                                                Background="Transparent"
                                                                                BorderThickness="0"/>
                                                                    </Grid>
                                                                </DataTemplate>
                                                            </ListBox.ItemTemplate>
                                                        </ListBox>
                                                    </StackPanel>
                                                </StackPanel>
                                            </ScrollViewer>
                                        </Grid>
                                    </Border>

                                    <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,10,0,0">
                                        <Button Command="{Binding StructConfigViewModel.AddNodeConfigCommand}"
                                Height="30"
                                Content="Добавить узел"
                                Padding="12,8"
                                HorizontalAlignment="Left"
                                Margin="0,0,8,0"
                                Style="{StaticResource ModernIconButtonStyle}"/>

                                        <Button Command="{Binding StructConfigViewModel.RemoveNodeConfigCommand}"
                                Height="30"
                                Content="Удалить узел"
                                Padding="12,8"
                                HorizontalAlignment="Left"
                                Style="{StaticResource ModernIconButtonStyle}"
                                Background="#E74C3C"
                                Foreground="White"
                                BorderBrush="#C0392B"/>
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <!-- Управление конфигурациями соединений -->
                            <Border Style="{StaticResource InnerCardStyle}" Margin="0,0,0,15">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,12">
                                        <Path Data="M12,2 L2,12 L12,22 L22,12 Z M7,7 L17,17 M7,17 L17,7"
                              Fill="#9B59B6"
                              Width="25"
                              Height="25"
                              Margin="0,0,8,0"/>
                                        <TextBlock Text="Конфигурации соединений"
                                   FontWeight="SemiBold"
                                   FontSize="14"
                                   Foreground="#2C3E50"/>
                                    </StackPanel>

                                    <Border Grid.Row="1" 
                            Background="#F8F9FA"
                            CornerRadius="4"
                            BorderBrush="#E1E8ED"
                            BorderThickness="1"
                            Height="300">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="2*"/>
                                            </Grid.ColumnDefinitions>

                                            <ListBox Grid.Column="0"
                                     ItemsSource="{Binding StructConfigViewModel.LinkConfigurations}"
                                     SelectedItem="{Binding StructConfigViewModel.SelectedLinkConfig}"
                                     Background="Transparent"
                                     BorderThickness="0"
                                     BorderBrush="#E1E8ED">
                                                <ListBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border Background="#FFFFFF"
                                                CornerRadius="2"
                                                BorderBrush="#E1E8ED"
                                                BorderThickness="1"
                                                Padding="8"
                                                Margin="2">
                                                            <TextBlock>
                                                <Run Text="{Binding NodeA}" FontWeight="SemiBold"/>
                                                <Run Text=" ↔ "/>
                                                <Run Text="{Binding NodeB}" FontWeight="SemiBold"/>
                                                            </TextBlock>
                                                        </Border>
                                                    </DataTemplate>
                                                </ListBox.ItemTemplate>
                                            </ListBox>

                                            <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto">
                                                <StackPanel Margin="10">
                                                    <TextBlock Text="Настройки соединения"
                                               FontWeight="Medium"
                                               FontSize="13"
                                               Foreground="#2C3E50"
                                               Margin="0,0,0,10"/>

                                                    <Grid Margin="0,0,0,12">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>
                                                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                                            <TextBlock Text="Узел A:"
                                                       FontWeight="Medium"
                                                       Foreground="#2C3E50"
                                                       Margin="0,0,0,4"/>
                                                            <TextBlock Text="{Binding StructConfigViewModel.SelectedLinkConfig.NodeA, UpdateSourceTrigger=PropertyChanged}"/>
                                                        </StackPanel>
                                                        <StackPanel Grid.Column="1">
                                                            <TextBlock Text="Узел B:"
                                                       FontWeight="Medium"
                                                       Foreground="#2C3E50"
                                                       Margin="0,0,0,4"/>
                                                            <TextBlock Text="{Binding StructConfigViewModel.SelectedLinkConfig.NodeB, UpdateSourceTrigger=PropertyChanged}"/>
                                                        </StackPanel>
                                                    </Grid>

                                                    <StackPanel>
                                                        <TextBlock Text="Разрешенные транспорты:"
                                                   FontWeight="Medium"
                                                   Foreground="#2C3E50"
                                                   Margin="0,0,0,4"/>

                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                            </Grid.ColumnDefinitions>

                                                            <ComboBox Grid.Column="0"
                                                                      ItemsSource="{Binding StructConfigViewModel.AvailableTransports}"
                                                                      SelectedItem="{Binding StructConfigViewModel.SelectedLinkConfig.SelectedTransportToAdd, Mode=TwoWay}"
                                                                      Style="{StaticResource ModernComboBoxStyle}"
                                                                      Margin="0,0,5,0"/>

                                                            <Button Grid.Column="1"
                                                                    Command="{Binding StructConfigViewModel.SelectedLinkConfig.AddTransportCommand}"
                                                                    Content="+"
                                                                    Width="30"
                                                                    Height="30"
                                                                    Style="{StaticResource ModernIconButtonStyle}"/>
                                                        </Grid>

                                                        <ListBox ItemsSource="{Binding StructConfigViewModel.SelectedLinkConfig.EnabledTransports}"
                                                 Height="120"
                                                 Margin="0,5,0,0">
                                                            <ListBox.ItemTemplate>
                                                                <DataTemplate>
                                                                    <Grid>
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="*"/>
                                                                            <ColumnDefinition Width="Auto"/>
                                                                        </Grid.ColumnDefinitions>
                                                                        <TextBlock Grid.Column="0" 
                                                                   Text="{Binding }"
                                                                   VerticalAlignment="Center"
                                                                   Margin="5,0"/>
                                                                        <Button Grid.Column="1"
                                                                Command="{Binding DataContext.StructConfigViewModel.SelectedLinkConfig.RemoveTransportCommand, 
                                                                        RelativeSource={RelativeSource AncestorType=ListBox}}"
                                                                CommandParameter="{Binding}"
                                                                Content="✕"
                                                                Width="24"
                                                                Height="24"
                                                                Style="{StaticResource ModernIconButtonStyle}"
                                                                Padding="2"
                                                                Background="Transparent"
                                                                BorderThickness="0"/>
                                                                    </Grid>
                                                                </DataTemplate>
                                                            </ListBox.ItemTemplate>
                                                        </ListBox>
                                                    </StackPanel>
                                                </StackPanel>
                                            </ScrollViewer>
                                        </Grid>
                                    </Border>

                                    <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,10,0,0">
                                        <Button Command="{Binding StructConfigViewModel.AddLinkConfigCommand}"
                                Height="30"
                                Content="Добавить соединение"
                                Padding="12,8"
                                HorizontalAlignment="Left"
                                Margin="0,0,8,0"
                                Style="{StaticResource ModernIconButtonStyle}"/>

                                        <Button Command="{Binding StructConfigViewModel.RemoveLinkConfigCommand}"
                                Height="30"
                                Content="Удалить соединение"
                                Padding="12,8"
                                HorizontalAlignment="Left"
                                Style="{StaticResource ModernIconButtonStyle}"
                                Background="#E74C3C"
                                Foreground="White"
                                BorderBrush="#C0392B"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>
                </TabItem>
            </TabControl>
        </Grid>
    </Grid>
</Window>